# 介绍

MD模型驱动是一套的软件工程解决方案，完整的方案是涉及到产品的过程生产、包括产品设计、视觉设计、技术方案设计、前后端开发实现、测试等解决方案。当前部分是前端开发框架,

## 前言

最近10多年，前端发展迅速，各种强大的框架react, vue纷纷完善到了一定的高度，开发效率也得到长足提升。很好的解决开发的基础层部分，但在如何实现业务上，业内相关的方案还比较少，更多是依靠团队要求和个人能力。

我们先来看比较直观几个问题：

1. 前端需要做技术设计么？这么做？做到什么程度？如何真正提效开发？
2. CodeView，view那些？怎么做？如何找到真正实现中的合理性和逻辑问题。
3. 如何在项目研发过程中方便和有序的沉淀？如何合理沉淀？
4. 多人，多次，多重迭代而导致的“牵一发而动全身”，“祖传代码”，这些问题如何解决？
5. 如何复用？如何扩展？在APaaS和Saas下，如何保证基础功能的稳定，同时针对不同场景进行的快速扩展?
6. 如何结合项目管理流程？合理评估工作量，各角色如何串联&协作，过程管理，衡量各角色产出。
   ……

而模型驱动解决方案，是以解决这些为导向，探寻业务和实现中更深层次的关联的方案。前端框架则是在基础框架（react，vue等）之上，融入优秀的UI框架，构建的一套基于模型实现业务的解决方案，提供更高效和合理的开发方式，良好的过程沉淀和灵活扩展机制，还包括设计，评估，实现，联调，测试各环境的规范，实践和辅助工具；预期是一个使用下线低，效果上线高的方案，能针对不同水平的程序员都能发挥出对应的能力；

开发框架能够无缝的接入任何的前端项目，但如果想要发挥最大效率，则需要引入基础框架对应的模型驱动的UI框架（比如：md-antd，在react项目中都可以进行引入）。当然也可以基于模型UI协议（md-ui-base）去实现自己对应的UI。一些主流的UI后续视情况封装。

## 设计理念

与当前流行的前端开发模式不同，模型驱动的核心理念以是业务视角出发，构建业务模型，在模型上实现业务和交互逻辑。在通过沉淀业务表达来规范和展示和交互。传统组件的感知则会被弱化，替代的是更有业务含义场景和逻辑表达。模型，视觉，数据请求完全独立，基于稳定的结构关联，变化内部消化，不会影响彼此。

核心的思想如下：

1. 页面本质：页面是基于某个业务达成某种目的具象化，而业务具象的载体是模型，目的具象的是场景，页面展示则是业务模型在特定场景上的表达。

2. 业务模型：将业务和逻辑通过编写模型进行沉淀，然后针对不同场景，派生出场景模型实现对模型和字段展示装饰。

3. 场景表达：业务目的则可以抽象成功能场景，场景能够定义逻辑，展示和交互，然后接收视觉和模型的填充来快速实现最终的业务页面的构建。

## 特点介绍

目前的前端开发（以react，vue为例）主要是页面展示为导向，对着视觉稿，拆解组件、状态和交互逻辑。而模型驱动则是以业务模型为核心，以产品PRD构建模型和逻辑，然后使用模型来构建页面，（或者说装饰模型的场景表达）。代码可以参考[入门例子](../develop/simple.md)

主要特点如下：

- 类型渲染

在模型驱动里面，核心是创建模型，而这个模型定义的每个字段根据其类型都会有特定的表达方式（TypeUI），来实现基础的数据类型的表达和业务表达（比如：在编辑场景下，数字类型则会渲染成数字输入框，货币类型则会渲染带币种的金额输入）；

- 模型渲染

模型本身也具有渲染能力，在基础展示场景下，数据对象模型会渲染成为Form，数据列表模型会渲染成为Table，通过`view|edit`场景来控制开启不同的渲染状态。另外也可以任何布局中，使用模型或者字段来渲染具体的内容。

- 数据流

模型本身具有数据管理能力，他会连通组件，数据和数据请求；基于事件进行数据流响应。因此数据的变化&ui的变化无需设定大量的state，依靠模型就能做到精准的响应。

- 业务&展示&数据分离

模型承载业务逻辑，展示负责布局和展示交互，数据请求实现前后端数据交互，各司其职，彼此对接稳定，内部承接变化；

在模型驱动中，一个推荐的做法是根据PRD就可以构建模型实现大部分的业务逻辑和交互【80%】，然后通过mock(md-mock)实现大部分功能的数据交互，然后视觉来填充展示（md-d2c, 布局和交互）【10%】，通过接口工具（md-tools）来验证接口并接入模型【10%】。

- 复杂场景

很多复杂场景其实考验的是抽象&设计能力，但往往在开发的时候，这类工作做的很简单，更多的时候都是以展示&实现为导向，人为的增加复杂度。在加上中途没有考虑到的地方，最后实现会变成一锅粥，在多几次地带，多几人维护后，更会升级成"八宝粥"。

而模型驱动开发本身就是抽象和梳理的的过程，同时将一些日程场景的功能简单化，让设计和开发都会清晰很多。比如：利用字段与字段，模型与模型之间清晰关系的建立，处理联动，动态渲染，逻辑计算等。同时还将前端常用的设计模型沉淀，提升设计能力。

（当然这块主要还是看人，不过好的方式和工具可以大大减少问题和提升效率，详细可见[模型驱动开发流程](../develop/flow)）

- 沉淀&持续迭代

针对项目沉淀问题，模型驱动提供了完善的沉淀机制（业务类型，TypeUI，展示器，装饰器，场景封装，数据驱动器等），能够在项目中保持持续的沉淀。

针对项目持续迭代，引起的代码逻辑性和维护问题（如：上面复杂场景中提到的多人问题），在模型驱动上也有一套基于模型场景的派生方案，能够更好的抽象出场景差异和有序的构建变化。（目前基于模型驱动正在建设APaaS解决方案会更好的解决此类问题，以及沉淀业务领域的功能）

应用情况：

目前框架的力度还没到完整的场景表达，替代的是跟模型相关的渲染部分。也能方便的接入新老页面的开发中；

UI实现的思路是模型结合api + 元组件的api，所以只需要理解新增的模型部分的开发。上手门槛主要在于，模型开发的思路转换，以及了解模型内置的丰富能力如何解决实现问题上。

最后总结一下模型驱动前端框架的短期目标：

1. 一个打三个，即一人具有三个人的效率；

2. 一套有序且持续成长的框架，逐步沉淀功能-业务-领域能力，默认就能达到构建APaaS级生产；

3. 从方案设计到产出有标准的流程规范和数据化的管理

## Next

项目流程：模型驱动有一套完整的项目流程和机制，涉及到项目各个角色，包括设计、评估，协作，辅助开发测试等工作的规范和管理机制。目前针对前端开发，有一套技术设计-工时评估-开发实现-联调的流程和规范，正在试点中；

工具：针对项目流程和研发过程的一套工具支持。PRD辅助，设计稿标注，工时评估，开发辅助，前后端联调，服务mock，测试辅助等等；如：目前因为开发模式和传统差异较大，上手成本比较高，但有开发辅助工具下，就能平稳的解决。

服务化：模型驱动后端部分也在建设，后端的持久化和服务化能力，已经有一些成果，不过还需要更多场景沉淀，后面会先以mock的方式提供；

低码： 模型驱动设计之初就是和低代码结合的，而且依靠模型驱动的特点，会构建更加简化，扩展性更好，沉淀能力更强的平台。最后的目标是基础页面-APaaS-Saas，各级搭建的一体化的平台；

AI：目前也在筹备中，已经具备一定的思路在探索，比如：AI建模，AI处理模型逻辑，视觉结合模型生成等。

跨端：跨端的方案在taro和flutter上有过简单的尝试，不过还没系统化，后续有场景会做专门的方案。
